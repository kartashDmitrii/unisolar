(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{enumerable:true,get:getter})}};__webpack_require__.r=function(exports){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(exports,"__esModule",{value:true})};__webpack_require__.t=function(value,mode){if(mode&1)value=__webpack_require__(value);if(mode&8)return value;if(mode&4&&typeof value==="object"&&value&&value.__esModule)return value;var ns=Object.create(null);__webpack_require__.r(ns);Object.defineProperty(ns,"default",{enumerable:true,value:value});if(mode&2&&typeof value!="string")for(var key in value)__webpack_require__.d(ns,key,function(key){return value[key]}.bind(null,key));return ns};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=3)})([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return hideList});class hideList{constructor(listBlock){this.listBlock=listBlock;this.list=this.listBlock.querySelector("[data-block]");this.listBlock.querySelector("[data-btn]").addEventListener("click",()=>{this.showBlock()});this.closeBlockFunc=this.closeBlock.bind(this);if(this.listBlock.querySelector("[data-btn]").classList.contains("active")){this.list.style.height=`${this.list.scrollHeight}px`;this.list.classList.add("active")}this.minHeight=parseInt(window.getComputedStyle(this.list).getPropertyValue("min-height"));this.windowEvent=this.listBlock.classList.contains("hide-window-event")}showBlock(){let blockHeight=parseInt(window.getComputedStyle(this.list).getPropertyValue("height"));if(blockHeight===this.minHeight){this.list.style.height=`${this.list.scrollHeight}px`;this.listBlock.querySelector("[data-btn]").classList.add("active");this.list.classList.add("active");this.listBlock.classList.add("active");if(this.windowEvent){window.addEventListener("mousedown",this.closeBlockFunc)}}else{this.listBlock.querySelector("[data-btn]").classList.remove("active");this.list.classList.remove("active");this.listBlock.classList.remove("active");this.list.style.height=`0`;if(this.windowEvent){window.removeEventListener("mousedown",this.closeBlockFunc)}}}closeBlock(event){if(!event.target.closest("[data-hide]")){this.listBlock.querySelector("[data-btn]").classList.remove("active");this.list.classList.remove("active");this.listBlock.classList.remove("active");this.list.style.height=`0`;window.removeEventListener("mousedown",this.closeBlockFunc)}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return NumberTimer});class NumberTimer{constructor(object){this.elem=object.elem;this.delay=typeof object.delay==="undefined"?1e3:object.delay;this.max=typeof object.max==="undefined"?parseInt(this.elem.innerText):object.max;this.min=typeof object.min==="undefined"?0:object.max;this.type=typeof object.type==="undefined"?"default":object.type;switch(this.type){case"ease-out":this.bezier=[0,0,.58,1];break;case"default":this.bezier=[0];break}this.elem.innerText=0;this.iteration=0;this.step=Math.round(this.delay/(this.max-this.min));this.currBezier=Math.floor(this.iteration/((this.max-this.min)/this.bezier.length));this.offsetElem=this.offset(this.elem);this.startAnimationFunc=this.startAnimation.bind(this);window.addEventListener("scroll",this.startAnimationFunc);this.start=false;let interval=setInterval(()=>{if(this.start){this.step=Math.round(this.delay/(this.max-this.min));this.currBezier=Math.floor(this.iteration/((this.max-this.min)/this.bezier.length));if(this.iteration<this.max-1){this.iteration++;this.elem.innerText=this.iteration}else{this.iteration++;this.elem.innerText=this.iteration;clearInterval(interval)}}},this.step*(this.bezier[this.currBezier]+1))}offset(el){let rect=el.getBoundingClientRect(),scrollLeft=window.pageXOffset||document.documentElement.scrollLeft,scrollTop=window.pageYOffset||document.documentElement.scrollTop;return{top:rect.top+scrollTop,left:rect.left+scrollLeft}}startAnimation(){if(window.scrollY+window.screen.height/2>=this.offsetElem.top){this.start=true;window.removeEventListener("scroll",this.startAnimationFunc)}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__.d(__webpack_exports__,"default",function(){return popupFunc});class popupFunc{constructor(button,popup,wrapper=true){this.button=button;this.popup=popup;this.wrapper=wrapper;this.openPopupFunc=this.privateOpenPopup.bind(this);this.closePopupFunc=this.privateClosePopup.bind(this);if(this.button.dataset.stopEvent===undefined){if(Array.isArray(this.button)){this.button.forEach(elem=>{elem.addEventListener("click",this.openPopupFunc)})}else{this.button.addEventListener("click",this.openPopupFunc)}}if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.querySelectorAll(".close").forEach(elem=>elem.addEventListener("click",this.closePopupFunc))})}else{this.popup.querySelectorAll(".close").forEach(elem=>elem.addEventListener("click",this.closePopupFunc))}}privateOpenPopup(event){event.preventDefault();this.openPopup()}privateClosePopup(event){if(!event.target.classList.contains("close")){event.stopPropagation()}else{if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.classList.remove("active");if(elem.parentNode.classList.contains("wrapper")&&this.wrapper){elem.parentNode.classList.remove("active")}if(window.screen.width<768){document.body.classList.remove("hidden")}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.remove("active")}})}else{this.popup.classList.remove("active");if(this.popup.parentNode.classList.contains("wrapper")&&this.wrapper){this.popup.parentNode.classList.remove("active")}if(window.screen.width<768){document.body.classList.remove("hidden")}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.remove("active")}}window.removeEventListener("mousedown",this.closePopupFunc)}}openPopup(){document.querySelectorAll(".popup-wrapper>div").forEach(elem=>{elem.classList.remove("active")});document.querySelectorAll(".popup").forEach(elem=>{elem.classList.remove("active")});if(Array.isArray(this.popup)){this.popup.forEach(elem=>{elem.classList.add("active");if(elem.parentNode.classList.contains("wrapper")&&this.wrapper){elem.parentNode.classList.add("active")}if(window.screen.width<768){document.body.classList.add("hidden")}});if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.add("active")}}else{this.popup.classList.add("active");if(this.popup.parentNode.classList.contains("wrapper")&&this.wrapper){this.popup.parentNode.classList.add("active")}if(window.screen.width<768){document.body.classList.add("hidden")}if(document.querySelector(".popup-wrapper")&&this.wrapper){document.querySelector(".popup-wrapper").classList.add("active")}}window.addEventListener("mousedown",this.closePopupFunc)}}},function(module,exports,__webpack_require__){__webpack_require__(4);__webpack_require__(0);__webpack_require__(1);module.exports=__webpack_require__(2)},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _components_hideList__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(0);var _components_NumberTimer__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(1);var _components_popupFunc__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(2);if(document.querySelector(".filters")&&document.querySelector(".main-content")){if(window.screen.width>767){document.querySelector(".filters .filters-wrapper").style.minHeight=document.querySelector(".main-content").scrollHeight-45+"px"}function closeFilter(e){if(!e.target.closest(".filters")||e.target.closest(".close")){document.querySelector(".filters").classList.remove("active");window.removeEventListener("mousedown",closeFilter)}}document.querySelector(".main-content .burger").addEventListener("click",function(){document.querySelector(".filters").classList.add("active");window.addEventListener("mousedown",closeFilter)})}console.log();if(document.querySelector("[data-hide]")){document.querySelectorAll("[data-hide]").forEach(elem=>{new _components_hideList__WEBPACK_IMPORTED_MODULE_0__["default"](elem)})}if(document.querySelector("section.top-block")){let swiper=new Swiper("section.top-block .slider",{pagination:{el:"section.top-block .slides-count",type:"fraction"},navigation:{nextEl:"section.top-block .slider-buttons .next",prevEl:"section.top-block .slider-buttons .prev"}})}if(document.querySelector(".short-about-company .numbers")){document.querySelectorAll(".short-about-company .numbers .num").forEach(elem=>{new _components_NumberTimer__WEBPACK_IMPORTED_MODULE_1__["default"]({elem:elem.querySelector("span"),delay:1500})})}if(document.querySelector("[data-shadow]")){document.querySelectorAll("[data-shadow]").forEach(elem=>{let text=elem.querySelector("[data-shadow-text]");let btn=elem.querySelector("[data-shadow-btn]");if(text.scrollHeight<=200){text.classList.add("no-shadow");btn.style.display="none"}})}document.querySelectorAll("[data-popup]").forEach(elem=>{new _components_popupFunc__WEBPACK_IMPORTED_MODULE_2__["default"](elem,document.querySelector(`.${elem.dataset.popup}`))});if(document.querySelector("header .burger")){let headerMenu=document.querySelector("header nav");let headerPhone=document.querySelector("header .phone");let headerLanguage=document.querySelector("header .language");function closeMobileMenu(e){if(!e.target.closest("header nav")&&!e.target.closest("header .phone")&&!e.target.closest("header .language")||e.target.closest("header .close")){headerLanguage.classList.remove("active");headerMenu.classList.remove("active");headerPhone.classList.remove("active");window.removeEventListener("mousedown",closeMobileMenu)}}document.querySelector("header .burger").addEventListener("click",function(){headerLanguage.classList.add("active");headerMenu.classList.add("active");headerPhone.classList.add("active");window.addEventListener("mousedown",closeMobileMenu)})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiXSwibmFtZXMiOlsibW9kdWxlcyIsImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJjYWxsIiwibSIsImMiLCJkIiwibmFtZSIsImdldHRlciIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJyIiwiU3ltYm9sIiwidG9TdHJpbmdUYWciLCJ2YWx1ZSIsInQiLCJtb2RlIiwiX19lc01vZHVsZSIsIm5zIiwiY3JlYXRlIiwia2V5IiwiYmluZCIsIm4iLCJnZXREZWZhdWx0IiwiZ2V0TW9kdWxlRXhwb3J0cyIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIl9fd2VicGFja19leHBvcnRzX18iLCJoaWRlTGlzdCIsIltvYmplY3QgT2JqZWN0XSIsImxpc3RCbG9jayIsInRoaXMiLCJsaXN0IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJzaG93QmxvY2siLCJjbG9zZUJsb2NrRnVuYyIsImNsb3NlQmxvY2siLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInN0eWxlIiwiaGVpZ2h0Iiwic2Nyb2xsSGVpZ2h0IiwiYWRkIiwibWluSGVpZ2h0IiwicGFyc2VJbnQiLCJ3aW5kb3ciLCJnZXRDb21wdXRlZFN0eWxlIiwiZ2V0UHJvcGVydHlWYWx1ZSIsIndpbmRvd0V2ZW50IiwiYmxvY2tIZWlnaHQiLCJyZW1vdmUiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiTnVtYmVyVGltZXIiLCJlbGVtIiwiZGVsYXkiLCJtYXgiLCJpbm5lclRleHQiLCJtaW4iLCJ0eXBlIiwiYmV6aWVyIiwiaXRlcmF0aW9uIiwic3RlcCIsIk1hdGgiLCJyb3VuZCIsImN1cnJCZXppZXIiLCJmbG9vciIsImxlbmd0aCIsIm9mZnNldEVsZW0iLCJvZmZzZXQiLCJzdGFydEFuaW1hdGlvbkZ1bmMiLCJzdGFydEFuaW1hdGlvbiIsInN0YXJ0IiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsImNsZWFySW50ZXJ2YWwiLCJlbCIsInJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJzY3JvbGxMZWZ0IiwicGFnZVhPZmZzZXQiLCJkb2N1bWVudCIsImRvY3VtZW50RWxlbWVudCIsInNjcm9sbFRvcCIsInBhZ2VZT2Zmc2V0IiwidG9wIiwibGVmdCIsInNjcm9sbFkiLCJzY3JlZW4iLCJwb3B1cEZ1bmMiLCJidXR0b24iLCJwb3B1cCIsIndyYXBwZXIiLCJvcGVuUG9wdXBGdW5jIiwicHJpdmF0ZU9wZW5Qb3B1cCIsImNsb3NlUG9wdXBGdW5jIiwicHJpdmF0ZUNsb3NlUG9wdXAiLCJkYXRhc2V0Iiwic3RvcEV2ZW50IiwidW5kZWZpbmVkIiwiQXJyYXkiLCJpc0FycmF5IiwiZm9yRWFjaCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJwcmV2ZW50RGVmYXVsdCIsIm9wZW5Qb3B1cCIsInN0b3BQcm9wYWdhdGlvbiIsInBhcmVudE5vZGUiLCJ3aWR0aCIsImJvZHkiLCJfY29tcG9uZW50c19oaWRlTGlzdF9fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMF9fIiwiX2NvbXBvbmVudHNfTnVtYmVyVGltZXJfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzFfXyIsIl9jb21wb25lbnRzX3BvcHVwRnVuY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fIiwiY2xvc2VGaWx0ZXIiLCJlIiwiY29uc29sZSIsImxvZyIsInN3aXBlciIsIlN3aXBlciIsInBhZ2luYXRpb24iLCJuYXZpZ2F0aW9uIiwibmV4dEVsIiwicHJldkVsIiwidGV4dCIsImJ0biIsImRpc3BsYXkiLCJoZWFkZXJNZW51IiwiaGVhZGVyUGhvbmUiLCJoZWFkZXJMYW5ndWFnZSIsImNsb3NlTW9iaWxlTWVudSJdLCJtYXBwaW5ncyI6IkNBQVMsU0FBVUEsU0FFVCxJQUFJ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VzNGLFVBQVVLLElBQUksVUFDekJ1RixZQUFZNUYsVUFBVUssSUFBSSxVQUMxQkcsT0FBT1osaUJBQWlCLFlBQWFrRyIsInNvdXJjZXNDb250ZW50IjpbIi8qKioqKiovIChmdW5jdGlvbihtb2R1bGVzKSB7IC8vIHdlYnBhY2tCb290c3RyYXBcbi8qKioqKiovIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuLyoqKioqKi8gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbi8qKioqKiovIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuLyoqKioqKi9cbi8qKioqKiovIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbi8qKioqKiovIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuLyoqKioqKi8gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4vKioqKioqLyBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuLyoqKioqKi8gXHRcdFx0aTogbW9kdWxlSWQsXG4vKioqKioqLyBcdFx0XHRsOiBmYWxzZSxcbi8qKioqKiovIFx0XHRcdGV4cG9ydHM6IHt9XG4vKioqKioqLyBcdFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4vKioqKioqLyBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbi8qKioqKiovIFx0XHRtb2R1bGUubCA9IHRydWU7XG4vKioqKioqL1xuLyoqKioqKi8gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4vKioqKioqLyBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuLyoqKioqKi8gXHR9XG4vKioqKioqL1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4vKioqKioqLyBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuLyoqKioqKi8gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4vKioqKioqLyBcdFx0fVxuLyoqKioqKi8gXHR9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuLyoqKioqKi8gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4vKioqKioqLyBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4vKioqKioqLyBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbi8qKioqKiovIFx0XHR9XG4vKioqKioqLyBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuLyoqKioqKi8gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbi8qKioqKiovIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4vKioqKioqLyBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuLyoqKioqKi8gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4vKioqKioqLyBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4vKioqKioqLyBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbi8qKioqKiovIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuLyoqKioqKi8gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbi8qKioqKiovIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4vKioqKioqLyBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuLyoqKioqKi8gXHRcdHJldHVybiBucztcbi8qKioqKiovIFx0fTtcbi8qKioqKiovXG4vKioqKioqLyBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4vKioqKioqLyBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuLyoqKioqKi8gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuLyoqKioqKi8gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbi8qKioqKiovIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4vKioqKioqLyBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuLyoqKioqKi8gXHRcdHJldHVybiBnZXR0ZXI7XG4vKioqKioqLyBcdH07XG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuLyoqKioqKi9cbi8qKioqKiovIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbi8qKioqKiovIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcbi8qKioqKiovXG4vKioqKioqL1xuLyoqKioqKi8gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbi8qKioqKiovIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMyk7XG4vKioqKioqLyB9KVxuLyoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKi9cbi8qKioqKiovIChbXG4vKiAwICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBleHBvcnQgKGJpbmRpbmcpICovIF9fd2VicGFja19yZXF1aXJlX18uZChfX3dlYnBhY2tfZXhwb3J0c19fLCBcImRlZmF1bHRcIiwgZnVuY3Rpb24oKSB7IHJldHVybiBoaWRlTGlzdDsgfSk7XG5jbGFzcyBoaWRlTGlzdHtcclxuICAgIGNvbnN0cnVjdG9yKGxpc3RCbG9jaykge1xyXG4gICAgICAgIHRoaXMubGlzdEJsb2NrID0gbGlzdEJsb2NrO1xyXG4gICAgICAgIHRoaXMubGlzdCA9IHRoaXMubGlzdEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJsb2NrXScpO1xyXG4gICAgICAgIHRoaXMubGlzdEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJ0bl0nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpPT57dGhpcy5zaG93QmxvY2soKX0pXHJcbiAgICAgICAgdGhpcy5jbG9zZUJsb2NrRnVuYyA9IHRoaXMuY2xvc2VCbG9jay5iaW5kKHRoaXMpXHJcbiAgICAgICAgaWYgKHRoaXMubGlzdEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJ0bl0nKS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5zdHlsZS5oZWlnaHQgPSBgJHt0aGlzLmxpc3Quc2Nyb2xsSGVpZ2h0fXB4YDtcclxuICAgICAgICAgICAgdGhpcy5saXN0LmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWluSGVpZ2h0ID0gcGFyc2VJbnQod2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5saXN0KS5nZXRQcm9wZXJ0eVZhbHVlKCdtaW4taGVpZ2h0JykpO1xyXG4gICAgICAgIHRoaXMud2luZG93RXZlbnQgPSB0aGlzLmxpc3RCbG9jay5jbGFzc0xpc3QuY29udGFpbnMoJ2hpZGUtd2luZG93LWV2ZW50Jyk7XHJcbiAgICB9XHJcbiAgICBzaG93QmxvY2soKXtcclxuICAgICAgICBsZXQgYmxvY2tIZWlnaHQgPSBwYXJzZUludCh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzLmxpc3QpLmdldFByb3BlcnR5VmFsdWUoJ2hlaWdodCcpKTtcclxuICAgICAgICBpZiAoYmxvY2tIZWlnaHQgPT09IHRoaXMubWluSGVpZ2h0KXtcclxuICAgICAgICAgICAgdGhpcy5saXN0LnN0eWxlLmhlaWdodCA9IGAke3RoaXMubGlzdC5zY3JvbGxIZWlnaHR9cHhgO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RCbG9jay5xdWVyeVNlbGVjdG9yKCdbZGF0YS1idG5dJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdC5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0QmxvY2suY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLndpbmRvd0V2ZW50KSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5jbG9zZUJsb2NrRnVuYylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJ0bl0nKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RCbG9jay5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0LnN0eWxlLmhlaWdodCA9IGAwYDtcclxuICAgICAgICAgICAgaWYgKHRoaXMud2luZG93RXZlbnQpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmNsb3NlQmxvY2tGdW5jKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgY2xvc2VCbG9jayhldmVudCl7XHJcbiAgICAgICAgaWYgKCFldmVudC50YXJnZXQuY2xvc2VzdCgnW2RhdGEtaGlkZV0nKSl7XHJcbiAgICAgICAgICAgIHRoaXMubGlzdEJsb2NrLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWJ0bl0nKS5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0LmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RCbG9jay5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdGhpcy5saXN0LnN0eWxlLmhlaWdodCA9IGAwYDtcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuY2xvc2VCbG9ja0Z1bmMpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKiovIH0pLFxuLyogMSAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkZWZhdWx0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gTnVtYmVyVGltZXI7IH0pO1xuY2xhc3MgTnVtYmVyVGltZXIge1xyXG4gICAgY29uc3RydWN0b3Iob2JqZWN0KSB7XHJcbiAgICAgICAgdGhpcy5lbGVtID0gb2JqZWN0LmVsZW07XHJcbiAgICAgICAgdGhpcy5kZWxheSA9IHR5cGVvZiBvYmplY3QuZGVsYXkgPT09IFwidW5kZWZpbmVkXCIgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAxMDAwIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LmRlbGF5O1xyXG4gICAgICAgIHRoaXMubWF4ID0gdHlwZW9mIG9iamVjdC5tYXggPT09IFwidW5kZWZpbmVkXCIgP1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KHRoaXMuZWxlbS5pbm5lclRleHQpIDpcclxuICAgICAgICAgICAgICAgICAgICBvYmplY3QubWF4O1xyXG4gICAgICAgIHRoaXMubWluID0gdHlwZW9mIG9iamVjdC5taW4gPT09IFwidW5kZWZpbmVkXCIgP1xyXG4gICAgICAgICAgICAgICAgICAgIDAgOlxyXG4gICAgICAgICAgICAgICAgICAgIG9iamVjdC5tYXg7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZW9mIG9iamVjdC50eXBlID09PSBcInVuZGVmaW5lZFwiID9cclxuICAgICAgICAgICAgICAgICAgICAgICAgJ2RlZmF1bHQnIDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2JqZWN0LnR5cGU7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSBcImVhc2Utb3V0XCI6XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJlemllciA9IFswLDAsMC41OCwxXTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlIFwiZGVmYXVsdFwiOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5iZXppZXIgPSBbMF07XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5lbGVtLmlubmVyVGV4dCA9IDA7XHJcbiAgICAgICAgdGhpcy5pdGVyYXRpb24gPSAwO1xyXG4gICAgICAgIHRoaXMuc3RlcCA9IE1hdGgucm91bmQodGhpcy5kZWxheSAvICh0aGlzLm1heCAtIHRoaXMubWluKSk7XHJcbiAgICAgICAgdGhpcy5jdXJyQmV6aWVyID0gTWF0aC5mbG9vcih0aGlzLml0ZXJhdGlvbiAvICgodGhpcy5tYXggLSB0aGlzLm1pbikgLyB0aGlzLmJlemllci5sZW5ndGggKSk7XHJcbiAgICAgICAgdGhpcy5vZmZzZXRFbGVtID0gdGhpcy5vZmZzZXQodGhpcy5lbGVtKTtcclxuICAgICAgICB0aGlzLnN0YXJ0QW5pbWF0aW9uRnVuYyA9IHRoaXMuc3RhcnRBbmltYXRpb24uYmluZCh0aGlzKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zdGFydEFuaW1hdGlvbkZ1bmMpO1xyXG4gICAgICAgIHRoaXMuc3RhcnQgPSBmYWxzZTtcclxuICAgICAgICBsZXQgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCggKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zdGFydCl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnN0ZXAgPSBNYXRoLnJvdW5kKHRoaXMuZGVsYXkgLyAodGhpcy5tYXggLSB0aGlzLm1pbikpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jdXJyQmV6aWVyID0gTWF0aC5mbG9vcih0aGlzLml0ZXJhdGlvbiAvICgodGhpcy5tYXggLSB0aGlzLm1pbikgLyB0aGlzLmJlemllci5sZW5ndGggKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5pdGVyYXRpb24gPCB0aGlzLm1heCAtIDEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuaXRlcmF0aW9uKys7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lbGVtLmlubmVyVGV4dCA9IHRoaXMuaXRlcmF0aW9uO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLml0ZXJhdGlvbisrO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZWxlbS5pbm5lclRleHQgPSB0aGlzLml0ZXJhdGlvbjtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgdGhpcy5zdGVwICogKHRoaXMuYmV6aWVyW3RoaXMuY3VyckJlemllcl0gKyAxKSApO1xyXG4gICAgfVxyXG4gICAgb2Zmc2V0KGVsKXtcclxuICAgICAgICBsZXQgcmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLFxyXG4gICAgICAgICAgICBzY3JvbGxMZWZ0ID0gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0LFxyXG4gICAgICAgICAgICBzY3JvbGxUb3AgPSB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcDtcclxuICAgICAgICByZXR1cm4geyB0b3A6IHJlY3QudG9wICsgc2Nyb2xsVG9wLCBsZWZ0OiByZWN0LmxlZnQgKyBzY3JvbGxMZWZ0IH1cclxuICAgIH1cclxuICAgIHN0YXJ0QW5pbWF0aW9uKCl7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5zY3JvbGxZICsgKHdpbmRvdy5zY3JlZW4uaGVpZ2h0IC8gMikgPj0gdGhpcy5vZmZzZXRFbGVtLnRvcCl7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnQgPSB0cnVlO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5zdGFydEFuaW1hdGlvbkZ1bmMpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XG5cbi8qKiovIH0pLFxuLyogMiAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgX193ZWJwYWNrX2V4cG9ydHNfXywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5cInVzZSBzdHJpY3RcIjtcbl9fd2VicGFja19yZXF1aXJlX18ucihfX3dlYnBhY2tfZXhwb3J0c19fKTtcbi8qIGhhcm1vbnkgZXhwb3J0IChiaW5kaW5nKSAqLyBfX3dlYnBhY2tfcmVxdWlyZV9fLmQoX193ZWJwYWNrX2V4cG9ydHNfXywgXCJkZWZhdWx0XCIsIGZ1bmN0aW9uKCkgeyByZXR1cm4gcG9wdXBGdW5jOyB9KTtcbmNsYXNzIHBvcHVwRnVuYyB7XHJcbiAgICBjb25zdHJ1Y3RvcihidXR0b24scG9wdXAsd3JhcHBlciA9IHRydWUpIHtcclxuICAgICAgICB0aGlzLmJ1dHRvbiA9IGJ1dHRvbjtcclxuICAgICAgICB0aGlzLnBvcHVwID0gcG9wdXA7XHJcbiAgICAgICAgdGhpcy53cmFwcGVyID0gd3JhcHBlcjtcclxuICAgICAgICB0aGlzLm9wZW5Qb3B1cEZ1bmMgPSB0aGlzLnByaXZhdGVPcGVuUG9wdXAuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLmNsb3NlUG9wdXBGdW5jID0gdGhpcy5wcml2YXRlQ2xvc2VQb3B1cC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIGlmKHRoaXMuYnV0dG9uLmRhdGFzZXQuc3RvcEV2ZW50ID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgaWYgKEFycmF5LmlzQXJyYXkodGhpcy5idXR0b24pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmJ1dHRvbi5mb3JFYWNoKGVsZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLm9wZW5Qb3B1cEZ1bmMpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5vcGVuUG9wdXBGdW5jKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnBvcHVwKSl7XHJcbiAgICAgICAgICAgIHRoaXMucG9wdXAuZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbG9zZScpLmZvckVhY2goZWxlbSA9PiBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZVBvcHVwRnVuYykpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnBvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5jbG9zZScpLmZvckVhY2goZWxlbSA9PiBlbGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5jbG9zZVBvcHVwRnVuYykpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHByaXZhdGVPcGVuUG9wdXAoZXZlbnQpe1xyXG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5vcGVuUG9wdXAoKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVDbG9zZVBvcHVwKGV2ZW50KXtcclxuICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2Nsb3NlJykpe1xyXG4gICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnBvcHVwKSl7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ3dyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxlbS5wYXJlbnROb2RlLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2hpZGRlbicpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpICYmIHRoaXMud3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucG9wdXAucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ3dyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLnBhcmVudE5vZGUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpICYmIHRoaXMud3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC13cmFwcGVyJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuY2xvc2VQb3B1cEZ1bmMpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIG9wZW5Qb3B1cCgpe1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cC13cmFwcGVyPmRpdicpLmZvckVhY2goIGVsZW0gPT4ge1xyXG4gICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwJykuZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgICAgIGVsZW0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICB9KTtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheSh0aGlzLnBvcHVwKSl7XHJcbiAgICAgICAgICAgIHRoaXMucG9wdXAuZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgICAgICAgICBlbGVtLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGVsZW0ucGFyZW50Tm9kZS5jbGFzc0xpc3QuY29udGFpbnMoJ3dyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAod2luZG93LnNjcmVlbi53aWR0aCA8IDc2OCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXAtd3JhcHBlcicpICYmIHRoaXMud3JhcHBlcikge1xyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXdyYXBwZXInKS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9wdXAuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBvcHVwLnBhcmVudE5vZGUuY2xhc3NMaXN0LmNvbnRhaW5zKCd3cmFwcGVyJykgJiYgdGhpcy53cmFwcGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBvcHVwLnBhcmVudE5vZGUuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHdpbmRvdy5zY3JlZW4ud2lkdGggPCA3NjgpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJylcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwLXdyYXBwZXInKSAmJiB0aGlzLndyYXBwZXIpIHtcclxuICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cC13cmFwcGVyJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuY2xvc2VQb3B1cEZ1bmMpO1xyXG4gICAgfVxyXG59XG5cbi8qKiovIH0pLFxuLyogMyAqL1xuLyoqKi8gKGZ1bmN0aW9uKG1vZHVsZSwgZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXykge1xuXG5fX3dlYnBhY2tfcmVxdWlyZV9fKDQpO1xuX193ZWJwYWNrX3JlcXVpcmVfXygwKTtcbl9fd2VicGFja19yZXF1aXJlX18oMSk7XG5tb2R1bGUuZXhwb3J0cyA9IF9fd2VicGFja19yZXF1aXJlX18oMik7XG5cblxuLyoqKi8gfSksXG4vKiA0ICovXG4vKioqLyAoZnVuY3Rpb24obW9kdWxlLCBfX3dlYnBhY2tfZXhwb3J0c19fLCBfX3dlYnBhY2tfcmVxdWlyZV9fKSB7XG5cblwidXNlIHN0cmljdFwiO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5yKF9fd2VicGFja19leHBvcnRzX18pO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX2hpZGVMaXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDApO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX051bWJlclRpbWVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX18gPSBfX3dlYnBhY2tfcmVxdWlyZV9fKDEpO1xuLyogaGFybW9ueSBpbXBvcnQgKi8gdmFyIF9jb21wb25lbnRzX3BvcHVwRnVuY19fV0VCUEFDS19JTVBPUlRFRF9NT0RVTEVfMl9fID0gX193ZWJwYWNrX3JlcXVpcmVfXygyKTtcblxyXG5cclxuXHJcblxyXG5cclxuaWYgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzJykgJiYgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1haW4tY29udGVudCcpKXtcclxuICAgIGlmICh3aW5kb3cuc2NyZWVuLndpZHRoID4gNzY3KSB7XHJcbiAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbHRlcnMgLmZpbHRlcnMtd3JhcHBlcicpLnN0eWxlLm1pbkhlaWdodCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWNvbnRlbnQnKS5zY3JvbGxIZWlnaHQgLSA0NSArICdweCdcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNsb3NlRmlsdGVyKGUpe1xyXG4gICAgICAgIGlmICghZS50YXJnZXQuY2xvc2VzdCgnLmZpbHRlcnMnKSB8fCBlLnRhcmdldC5jbG9zZXN0KCcuY2xvc2UnKSl7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzJykuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJylcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIGNsb3NlRmlsdGVyKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tYWluLWNvbnRlbnQgLmJ1cmdlcicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWx0ZXJzJykuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJylcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgY2xvc2VGaWx0ZXIpXHJcbiAgICB9KTtcclxufVxyXG5jb25zb2xlLmxvZygpXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1oaWRlXScpKXtcclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJ1tkYXRhLWhpZGVdJykuZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgbmV3IF9jb21wb25lbnRzX2hpZGVMaXN0X19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8wX19bXCJkZWZhdWx0XCJdKGVsZW0pXHJcbiAgICB9KVxyXG59XHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3Rvcignc2VjdGlvbi50b3AtYmxvY2snKSl7XHJcbiAgICBsZXQgc3dpcGVyID0gbmV3IFN3aXBlcihcInNlY3Rpb24udG9wLWJsb2NrIC5zbGlkZXJcIiwge1xyXG4gICAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICAgICAgZWw6ICdzZWN0aW9uLnRvcC1ibG9jayAuc2xpZGVzLWNvdW50JyxcclxuICAgICAgICAgICAgdHlwZTogJ2ZyYWN0aW9uJ1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICAgICAgbmV4dEVsOiAnc2VjdGlvbi50b3AtYmxvY2sgLnNsaWRlci1idXR0b25zIC5uZXh0JyxcclxuICAgICAgICAgICAgcHJldkVsOiAnc2VjdGlvbi50b3AtYmxvY2sgLnNsaWRlci1idXR0b25zIC5wcmV2J1xyXG4gICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNob3J0LWFib3V0LWNvbXBhbnkgLm51bWJlcnMnKSl7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc2hvcnQtYWJvdXQtY29tcGFueSAubnVtYmVycyAubnVtJykuZm9yRWFjaCggZWxlbSA9PiB7XHJcbiAgICAgICAgbmV3IF9jb21wb25lbnRzX051bWJlclRpbWVyX19XRUJQQUNLX0lNUE9SVEVEX01PRFVMRV8xX19bXCJkZWZhdWx0XCJdKHtcclxuICAgICAgICAgICAgZWxlbTogZWxlbS5xdWVyeVNlbGVjdG9yKFwic3BhblwiKSxcclxuICAgICAgICAgICAgZGVsYXk6IDE1MDBcclxuICAgICAgICB9KTtcclxuICAgIH0pXHJcbn1cclxuXHJcbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdbZGF0YS1zaGFkb3ddJykpe1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnW2RhdGEtc2hhZG93XScpLmZvckVhY2goIGVsZW0gPT57XHJcbiAgICAgICAgbGV0IHRleHQgPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNoYWRvdy10ZXh0XScpO1xyXG4gICAgICAgIGxldCBidG4gPSBlbGVtLnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLXNoYWRvdy1idG5dJyk7XHJcbiAgICAgICAgaWYodGV4dC5zY3JvbGxIZWlnaHQgPD0gMjAwKXtcclxuICAgICAgICAgICAgdGV4dC5jbGFzc0xpc3QuYWRkKCduby1zaGFkb3cnKTtcclxuICAgICAgICAgICAgYnRuLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcblxyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCdbZGF0YS1wb3B1cF0nKS5mb3JFYWNoKCBlbGVtID0+IHtcclxuICAgIG5ldyBfY29tcG9uZW50c19wb3B1cEZ1bmNfX1dFQlBBQ0tfSU1QT1JURURfTU9EVUxFXzJfX1tcImRlZmF1bHRcIl0oZWxlbSwgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7ZWxlbS5kYXRhc2V0LnBvcHVwfWApKTtcclxufSk7XHJcblxyXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaGVhZGVyIC5idXJnZXInKSl7XHJcbiAgICBsZXQgaGVhZGVyTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciBuYXYnKTtcclxuICAgIGxldCBoZWFkZXJQaG9uZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciAucGhvbmUnKTtcclxuICAgIGxldCBoZWFkZXJMYW5ndWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciAubGFuZ3VhZ2UnKTtcclxuICAgIGZ1bmN0aW9uIGNsb3NlTW9iaWxlTWVudShlKXtcclxuICAgICAgICBpZiAoIWUudGFyZ2V0LmNsb3Nlc3QoJ2hlYWRlciBuYXYnKSAmJiAhZS50YXJnZXQuY2xvc2VzdCgnaGVhZGVyIC5waG9uZScpICYmICFlLnRhcmdldC5jbG9zZXN0KCdoZWFkZXIgLmxhbmd1YWdlJykgfHwgZS50YXJnZXQuY2xvc2VzdCgnaGVhZGVyIC5jbG9zZScpKXtcclxuICAgICAgICAgICAgaGVhZGVyTGFuZ3VhZ2UuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGhlYWRlck1lbnUuY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIGhlYWRlclBob25lLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgY2xvc2VNb2JpbGVNZW51KVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2hlYWRlciAuYnVyZ2VyJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaGVhZGVyTGFuZ3VhZ2UuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgaGVhZGVyTWVudS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICBoZWFkZXJQaG9uZS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgY2xvc2VNb2JpbGVNZW51KVxyXG4gICAgfSlcclxufVxuXG4vKioqLyB9KVxuLyoqKioqKi8gXSk7Il0sImZpbGUiOiJtYWluLW1pbi5qcyJ9
